# 修正計画とステータス

## 🐛 報告された問題

### 1. ✅ スコアがnullになる問題
**状態**: 修正完了
**変更点**:
- `prediction.ts`: nullチェックを追加、デフォルト値50を使用

### 2. ✅ GPT-4o → GPT-4o-miniへの変更
**状態**: 修正完了  
**変更点**:
- `sentiment.ts`: gpt-4o-miniに変更
- `prediction.ts`: gpt-4o-miniに変更

### 3. 🔄 投資シミュレーターのエラー
**状態**: 修正完了（テスト待ち）
**変更点**:
- `simulation.ts`: 柔軟な日付マッチング関数を追加

### 4. ⏳ バックテストのエラー
**状態**: 同上（シミュレーションと同じ修正）

### 5. ⏳ 各スコア項目の詳細表示UI
**状態**: 計画中
**実装予定**:
- クリック可能なスコアカード
- モーダルで詳細データ表示
- 入力データと計算過程の可視化

### 6. ⏳ おすすめ銘柄がnull
**状態**: 調査中
**原因候補**:
- APIレート制限
- エラーハンドリング不足
- センチメントスコアのnull問題

### 7. ⏳ ビジュアライゼーション強化
**状態**: 計画中
**実装予定**:
- スコア内訳の円グラフ
- 過去パフォーマンスの折れ線グラフ
- インタラクティブなツールチップ

## 📝 次のステップ

1. ビルドと再起動
2. 基本機能のテスト
3. エラーログの確認
4. 段階的なUI改善

## 🔧 ビルドコマンド

```bash
# クリーンビルド
cd /home/user/webapp && rm -rf dist .wrangler node_modules/.vite
npm run build

# 再起動
pm2 restart stock-ai-predictor

# ログ確認
pm2 logs --nostream
```
